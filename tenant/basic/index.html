<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title id="titleTag">Daily Deals</title>
  <meta name="description" content="Daily Amazon promo codes & deals — auto-updated for your store.">
  <link rel="icon" href="/favicon.png" sizes="32x32">
  <link rel="apple-touch-icon" href="/favicon.png">
  <style>
    :root{
      --brand:#0ea5a6; --accent:#1e90ff; --ink:#0b1320; --muted:#4d6375; --bg:#f6faf9; --surface:#fff; --line:#e8eef5;
      --btn:#0f915a; --btn-ink:#fff; --shadow:0 10px 26px rgba(2,24,43,.12);
    }
    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    a{color:inherit;text-decoration:none} img{display:block;max-width:100%}

    .chips{display:flex;gap:10px;align-items:center;padding:8px 12px}
    .chip{background:#e7f6f6;color:#0b4c4d;border:1px solid #cfeeee;padding:6px 10px;border-radius:999px;font-weight:800;font-size:12px}

    .hero{background:linear-gradient(135deg,var(--brand),var(--accent));color:#fff;border-bottom:1px solid #dff1f3}
    .hero .inner{max-width:1200px;margin:0 auto;padding:18px 16px 24px}
    .hero-grid{display:grid;grid-template-columns:1fr auto;gap:16px;align-items:center}
    .h1{margin:0;font-size:clamp(22px,2.4vw,34px);font-weight:900}
    .sub{margin:6px 0 0;color:#eaf7ff}
    .tabs{display:flex;gap:10px;margin-top:16px;flex-wrap:wrap}
    .pill{background:#fff;color:#083663;border:1px solid #d9e7ff;padding:8px 12px;border-radius:999px;font-weight:800;cursor:pointer}
    .pill.primary{background:#083663;color:#fff;border-color:#083663}

    .toolbar{position:sticky;top:0;z-index:80;background:#f6faf9cc;backdrop-filter:saturate(160%) blur(10px);border-bottom:1px solid #e8eef5}
    .toolbar .wrap{max-width:1200px;margin:0 auto;padding:10px 16px;display:grid;gap:10px}
    .toolbar-row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .search{flex:1;min-width:220px;background:#fff;border:1px solid var(--line);border-radius:999px;display:flex;gap:8px;padding:10px 14px;box-shadow:0 6px 14px rgba(2,24,43,.06)}
    .search input{border:0;outline:0;flex:1;font-size:15px;color:#0d2530}
    .select{min-width:170px;background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px 12px;font-weight:700;color:#083663}
    .ghost{padding:10px 12px;border-radius:10px;background:#e9f8f7;border:1px solid #cfeeee;font-weight:800;cursor:pointer}

    .wrap{max-width:1200px;margin:0 auto;padding:0 16px}

    .grid{display:grid;gap:16px;margin:16px 0 36px}
    @media (max-width:599px){ .grid{grid-template-columns:1fr} }
    @media (min-width:600px){ .grid{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))} }

    .card{background:var(--surface);border:1px solid var(--line);border-radius:16px;box-shadow:var(--shadow);overflow:hidden;display:flex;flex-direction:column;transition:transform .08s ease, box-shadow .2s ease}
    .card:hover{transform:translateY(-2px);box-shadow:0 16px 36px rgba(2,24,43,.16)}
    .media{background:#fff;border-bottom:1px solid #eaeef3;display:flex;justify-content:center;align-items:center;overflow:hidden;height:260px}
    .media img{max-width:100%;max-height:100%;height:auto;width:auto;object-fit:contain}
    .body{padding:12px}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:6px}
    .tag{font-size:11px;padding:3px 6px;border-radius:999px;font-weight:700;white-space:nowrap;background:#eef7ff;color:#083663;border:1px solid #cfe6ff}
    .cc{background:#dff5e9;border:1px solid #8edbb7;color:#0b4c2f}
    .title-line{font-size:15px;font-weight:800;line-height:1.25;margin:2px 0 6px;min-height:38px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}
    .stars{font-size:14px;color:#f39c12;font-weight:700;margin:4px 0}
    .price-box{display:flex;align-items:baseline;gap:8px;margin-top:6px}
    .original-price{color:#999;text-decoration:line-through;font-size:13px}
    .deal-price{color:#0c6e53;font-weight:900;font-size:18px}
    .meta2{display:flex;gap:8px;flex-wrap:wrap;font-size:12px;color:#0b3d3f}
    .actions{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:10px}
    .btn{display:inline-block;text-align:center;padding:12px;border-radius:12px;border:1px solid #0b7247;background:var(--btn);color:var(--btn-ink);font-weight:900}
    .btn-code{display:inline-block;text-align:center;padding:12px;border-radius:12px;background:#fff;color:#083663;border:1px solid #cfeeee;font-weight:900}
    .actions > *{min-width:0;max-width:100%}
    @media (max-width:599px){ .actions{grid-template-columns:1fr} }

    .empty{display:none;text-align:center;color:#4e6a79;padding:40px 16px}
    .empty.show{display:block}
    .errbox{max-width:1100px;margin:18px auto 0;padding:14px;border:2px solid #ffd2d2;background:#fff6f6;border-radius:12px;color:#8a1f1f}
    .errhdr{font-weight:900;margin-bottom:6px}

    footer{color:#4e6a79;border-top:1px solid #e8eef5;padding:24px 0;margin-top:20px;font-size:13px;text-align:center}
    footer small{color:#98a5b1}
  </style>
</head>
<body>
  <!-- chips -->
  <div class="chips">
    <span id="siteChip" class="chip">Site: —</span>
    <span id="lastUpdated" class="chip">Last updated: —</span>
    <span id="dealCount" class="chip">Deals shown: —</span>
  </div>

  <!-- hero -->
  <header class="hero">
    <div class="inner">
      <div class="hero-grid">
        <div>
          <h1 id="headline" class="h1">Deals</h1>
          <p class="sub" id="subhead">Daily promo codes, coupons, and finds.</p>
          <div class="tabs">
            <button class="pill primary tab" data-src="today">Today’s Deals</button>
            <button class="pill tab" data-src="yesterday">Yesterday</button>
            <button class="pill tab" data-src="almost">Almost Gone</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- toolbar -->
  <div class="toolbar">
    <div class="wrap">
      <div class="toolbar-row">
        <div class="search">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true"><path d="M21 21l-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="#4e6a79" stroke-width="2" stroke-linecap="round"/></svg>
          <input id="search" type="search" placeholder="Search products… e.g., sweaters, leggings, kitchen" aria-label="Search deals"/>
        </div>
        <select id="category" class="select" aria-label="Filter by category">
          <option value="__all__" selected>All categories</option>
        </select>
        <select id="sort" class="select" aria-label="Sort deals">
          <option value="newest" selected>Newest</option>
          <option value="pricelow">Price: Low → High</option>
          <option value="pricehigh">Price: High → Low</option>
        </select>
        <button id="reset" class="ghost" type="button">Reset</button>
      </div>
    </div>
  </div>

  <!-- error -->
  <div id="fatal" class="errbox" style="display:none">
    <div class="errhdr">We couldn’t load everything</div>
    <div id="fatalMsg">Network error.</div>
    <div style="margin-top:8px">
      <button id="retryBtn" class="ghost" type="button">Try again</button>
    </div>
  </div>

  <!-- content -->
  <main id="main" class="wrap">
    <div id="grid" class="grid"><p>Loading deals…</p></div>
    <div id="empty" class="empty">No items match your search/filter.</div>
  </main>

  <footer class="wrap">
    <p><b>Disclosure:</b> As an Amazon Associate I earn from qualifying purchases. Prices & codes may change at any time.</p>
    <small>Site hosted by BagThat platform</small>
  </footer>

<script>
/* identical logic retained; only the page title text is now dynamic */
document.addEventListener('DOMContentLoaded',()=>{
  const sub = location.hostname.split('.')[0];
  document.getElementById('titleTag').textContent = `${sub ? sub.charAt(0).toUpperCase()+sub.slice(1) : 'Daily'} Deals`;
});
</script>

<!-- existing JS logic from your working Basic build stays unchanged -->
<!-- (all functions: fetchCSV, loadTenant, loadDeals, applyFilters, etc.) -->
</body>
</html>
