<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Deals — Powered by BagThat</title>
  <meta name="color-scheme" content="light only">
  <style>
    body{margin:0;font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f7fafc;color:#0b1320}
    header{background:linear-gradient(90deg,#0ea5e9,#22d3ee);color:#fff;padding:22px 28px;display:flex;align-items:center;justify-content:space-between}
    header h1{margin:0;font-size:1.8rem;font-weight:700;display:flex;align-items:center;gap:.5rem}
    header .meta{display:flex;gap:12px;align-items:center}
    header .meta span{background:#fff;color:#0b1320;padding:4px 10px;border-radius:20px;font-size:.8rem}
    header .badge{display:inline-block;width:34px;height:34px;border-radius:50%;overflow:hidden;background:#fff;flex-shrink:0}
    header .badge img{width:100%;height:100%;object-fit:contain}

    .sidebar{width:200px;padding:20px}
    .sidebar nav{display:flex;flex-direction:column;gap:10px}
    .sidebar button{padding:10px 14px;border:0;border-radius:50px;cursor:pointer;font-weight:600;color:#0b1320;background:#fff}
    .sidebar button.active{background:#0b1320;color:#fff}
    .content{padding:20px;flex:1}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}
    .card{background:#fff;padding:12px;border-radius:12px;box-shadow:0 2px 6px rgba(0,0,0,.05);display:flex;flex-direction:column}
    .card img{width:100%;border-radius:8px;margin-bottom:10px}
    .card h3{margin:0;font-size:1rem}
    .card .price{font-weight:bold;color:#047857}
    .card .old{font-size:.9rem;color:#6b7280;text-decoration:line-through;margin-left:6px}
    .actions{margin-top:auto;display:flex;gap:8px}
    .actions button{flex:1;padding:8px;border-radius:6px;border:0;cursor:pointer}
    .go{background:#059669;color:#fff}
    .copy{background:#e5e7eb;color:#111}
    .searchbar{margin:16px 0;display:flex;gap:10px}
    .searchbar input{flex:1;padding:10px;border:1px solid #e5e7eb;border-radius:8px}
    .filters{display:flex;gap:10px}
    .filters select{padding:10px;border:1px solid #e5e7eb;border-radius:8px}
  </style>
</head>
<body>
  <header>
    <h1 id="siteTitle">ABCDeals</h1>
    <div class="meta">
      <span id="lastUpdated">Last updated: --</span>
      <span id="dealCount">Deals shown: --</span>
      <div class="badge">
        <img src="/tenant/assets/basic.png" alt="Plan Badge"/>
      </div>
    </div>
  </header>

  <main style="display:flex">
    <aside class="sidebar">
      <nav>
        <button class="active">Today's Deals</button>
        <button>Yesterday</button>
        <button>Almost Gone</button>
      </nav>
    </aside>
    <section class="content">
      <div class="searchbar">
        <input type="text" placeholder="Search products… e.g., sweaters, leggings, kitchen"/>
        <div class="filters">
          <select><option>All categories</option></select>
          <select><option>Newest</option></select>
          <button>Reset</button>
        </div>
      </div>
      <div class="grid" id="dealsGrid"></div>
      <p style="margin-top:20px;font-size:.8rem;color:#6b7280">
        Disclosure: As an Amazon Associate I earn from qualifying purchases.
      </p>
    </section>
  </main>

  <script>
    async function loadDeals(){
      const res = await fetch("https://raw.githubusercontent.com/KMillionaireInc/DealsData/main/deals.json");
      const data = await res.json();
      const grid = document.getElementById("dealsGrid");
      grid.innerHTML = "";
      data.forEach(d=>{
        const card=document.createElement("div");
        card.className="card";
        card.innerHTML=`
          <img src="${d.image}" alt="">
          <h3>${d.title}</h3>
          <div><span class="price">$${d.price}</span>
          <span class="old">$${d.oldPrice}</span></div>
          <div class="actions">
            <button class="copy">Copy Code</button>
            <button class="go">Go to Amazon</button>
          </div>`;
        grid.appendChild(card);
      });
      document.getElementById("dealCount").textContent = "Deals shown: " + data.length;
      document.getElementById("lastUpdated").textContent = "Last updated: " + new Date().toLocaleString();
    }
    loadDeals();
  </script>
</body>
</html>
