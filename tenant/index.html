<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Deals ‚Äî Powered by BagThat</title>
  <meta name="description" content="Daily Amazon promo codes & deals ‚Äî auto-updated and tagged for your associate ID.">
  <link rel="icon" href="/favicon.png" sizes="32x32">
  <link rel="apple-touch-icon" href="/favicon.png">
  <meta name="color-scheme" content="light only">

  <style>
    :root{
      /* Brand is updated at runtime by your JS (setTheme). These are fallbacks. */
      --brand:#0ea5a6; 
      --accent:#1e90ff; 
      --ink:#0b1320; 
      --muted:#4d6375; 
      --bg:#f7faf9; 
      --surface:#ffffff; 
      --line:#e7eef4; 
      --shadow:0 10px 26px rgba(2,24,43,.10);
      --shadow-lg:0 18px 40px rgba(2,24,43,.12);
      --pill:#083663;
      --pill-ink:#fff;
      --good:#0b7247;
      --warn:#ff8a1f;
      --star:#f39c12;
      --chip:#e7f2ff;
    }

    *{box-sizing:border-box}
    html,body{margin:0;background:var(--bg);color:var(--ink);font:16px/1.4 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;}

    a{color:inherit;text-decoration:none}
    img{display:block;max-width:100%}

    /* Top info chips */
    .topchips{
      position:sticky;top:0;z-index:60;
      display:flex;gap:8px;align-items:center;
      padding:8px 14px;border-bottom:1px solid var(--line);
      background:#ffffffcc;backdrop-filter:saturate(180%) blur(8px);
    }
    .chip{background:var(--chip);border:1px solid #cfe6ff;color:#083663;padding:6px 10px;border-radius:999px;font-weight:800;font-size:12px}

    /* Hero */
    .hero{
      background:linear-gradient(135deg,var(--brand),var(--accent));
      color:#fff;border-bottom:1px solid #dff1f3;
    }
    .hero-inner{
      max-width:1200px;margin:0 auto;padding:28px 16px;
      display:grid;grid-template-columns:1fr auto;gap:16px;align-items:center;
    }
    .hero-left{
      display:grid;grid-template-columns:auto 1fr;gap:16px;align-items:center;
    }
    .hero-badge{
      display:grid;place-items:center;width:56px;height:56px;border-radius:14px;background:rgba(255,255,255,.18);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.25);font-weight:900;
    }
    .hero-title{margin:0;font-weight:900;font-size:clamp(22px,2.6vw,34px);letter-spacing:.2px}
    .hero-sub{margin:2px 0 0;color:#e9f6ff}
    .hero-tabs{display:flex;gap:10px;flex-wrap:wrap}
    .pill{
      background:#ffffff;
      color:#083663;
      border:1px solid #d9e7ff;
      padding:10px 14px;border-radius:999px;font-weight:800;cursor:pointer;
      transition:transform .06s ease, box-shadow .15s ease, background .15s ease;
    }
    .pill:hover{transform:translateY(-1px);box-shadow:0 8px 18px rgba(0,0,0,.10)}
    .pill.primary{background:var(--pill);color:var(--pill-ink);border-color:var(--pill)}

    /* Toolbar */
    .toolbar{position:sticky;top:48px;z-index:50;background:#f7faf9cc;backdrop-filter:saturate(160%) blur(8px);border-bottom:1px solid var(--line)}
    .toolbar-inner{max-width:1200px;margin:0 auto;padding:12px 16px;display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .search{
      flex:1;min-width:240px;display:flex;align-items:center;gap:10px;
      background:#fff;border:1px solid var(--line);border-radius:999px;padding:10px 14px;box-shadow:0 6px 14px rgba(2,24,43,.06)
    }
    .search input{border:0;outline:0;flex:1;font-size:15px;color:#0d2530;background:transparent}
    .select{min-width:170px;background:#fff;border:1px solid var(--line);border-radius:12px;padding:10px 12px;font-weight:700;color:#083663}
    .ghost{padding:10px 12px;border-radius:10px;background:#e9f8f7;border:1px solid #cfeeee;font-weight:800;cursor:pointer}
    .ghost:hover{filter:brightness(.98)}

    /* Main grid */
    .wrap{max-width:1200px;margin:0 auto;padding:0 16px}
    .grid{display:grid;gap:16px;margin:16px 0 36px}
    @media (max-width:599px){ .grid{grid-template-columns:1fr} }
    @media (min-width:600px){ .grid{grid-template-columns:repeat(auto-fit,minmax(260px,1fr))} }

    /* Cards */
    .card{
      background:var(--surface);border:1px solid var(--line);border-radius:14px;box-shadow:var(--shadow);
      display:flex;flex-direction:column;overflow:hidden;transition:transform .08s ease, box-shadow .2s ease;
    }
    .card:hover{transform:translateY(-2px);box-shadow:var(--shadow-lg)}
    .media{background:#fff;border-bottom:1px solid var(--line);display:flex;justify-content:center;align-items:flex-start;overflow:hidden;padding:10px;height:260px}
    @media (max-width:599px){ .media{height:240px} }
    .media img{max-width:100%;max-height:100%;height:auto;width:auto;object-fit:contain;object-position:top center}

    .body{padding:12px}
    .tags{display:flex;gap:8px;flex-wrap:wrap;margin-bottom:6px}
    .tag{font-size:11px;padding:3px 6px;border-radius:999px;font-weight:700;white-space:nowrap;background:#eef7ff;color:#083663;border:1px solid #cfe6ff}
    .tag.cc{background:#dff5e9;border-color:#8edbb7;color:#0b4c2f}

    .title-line{font-size:15px;font-weight:800;line-height:1.25;margin:2px 0 6px;min-height:38px;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}

    .stars{font-size:14px;color:var(--star);font-weight:700;margin:2px 0 6px}

    .price-box{display:flex;align-items:baseline;gap:8px;margin-top:6px}
    .original-price{color:#99a7b3;text-decoration:line-through;font-size:13px}
    .deal-price{color:var(--good);font-weight:900;font-size:18px}

    .meta2{display:flex;gap:8px;flex-wrap:wrap;font-size:12px;color:#0b3d3f;margin-top:6px}

    .actions{display:grid;grid-template-columns:1fr 1fr;gap:8px;margin-top:12px}
    .btn{
      display:inline-block;text-align:center;padding:12px;border-radius:12px;border:1px solid #0b7247;background:var(--good);color:#fff;font-weight:900;transition:filter .12s ease}
    .btn:hover{filter:brightness(.96)}
    .btn-code{
      display:inline-grid;grid-auto-flow:column;place-content:center;gap:8px;padding:12px;border-radius:12px;background:#fff;color:#083663;border:1px solid #cfeeee;font-weight:900;transition:filter .12s ease}
    .btn-code:hover{filter:brightness(.98)}
    .actions > *{min-width:0;max-width:100%}
    @media (max-width:599px){ .actions{grid-template-columns:1fr} }

    /* Empty state + fatal */
    .empty{display:none;text-align:center;color:#4e6a79;padding:40px 16px}
    .empty.show{display:block}
    .errbox{max-width:900px;margin:40px auto;padding:18px;border:2px solid #ffd2d2;background:#fff6f6;border-radius:14px;color:#8a1f1f}

    footer{color:#4e6a79;border-top:1px solid var(--line);padding:24px 0;margin-top:20px;text-align:center}
    .muted{color:#70879a}
  </style>
</head>
<body>

  <!-- Fatal error box (kept for your JS try/catch) -->
  <div id="fatal" class="errbox" style="display:none"></div>

  <!-- Sticky status chips (site name, when updated, count) -->
  <div class="topchips">
    <span id="siteChip" class="chip">Loading site‚Ä¶</span>
    <span id="lastUpdated" class="chip">Last updated: ‚Äî</span>
    <span id="dealCount" class="chip">Deals shown: ‚Äî</span>
  </div>

  <!-- HERO -->
  <header class="hero">
    <div class="hero-inner">
      <div class="hero-left">
        <div class="hero-badge" id="logo" aria-hidden="true">üõçÔ∏è</div>
        <div>
          <h1 id="headline" class="hero-title">Deals</h1>
          <p id="subhead" class="hero-sub">Daily promo codes, coupons and finds.</p>
        </div>
      </div>
      <div class="hero-tabs">
        <button class="pill primary tab" data-src="today">Today‚Äôs Deals</button>
        <button class="pill tab" data-src="yesterday">Yesterday</button>
        <button class="pill tab" data-src="almost">Almost Gone</button>
      </div>
    </div>
  </header>

  <!-- TOOLBAR -->
  <div class="toolbar">
    <div class="toolbar-inner">
      <div class="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.3-4.3M10.5 18a7.5 7.5 0 1 1 0-15 7.5 7.5 0 0 1 0 15Z" stroke="#4e6a79" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input id="search" type="search" placeholder="Search products‚Ä¶ e.g., sweaters, leggings, kitchen" aria-label="Search deals"/>
      </div>
      <select id="category" class="select" aria-label="Filter by category">
        <option value="__all__" selected>All categories</option>
      </select>
      <select id="sort" class="select" aria-label="Sort deals">
        <option value="newest" selected>Newest</option>
        <option value="pricelow">Price: Low ‚Üí High</option>
        <option value="pricehigh">Price: High ‚Üí Low</option>
      </select>
      <button id="reset" class="ghost" type="button">Reset</button>
    </div>
  </div>

  <!-- GRID -->
  <main id="main" class="wrap">
    <div id="grid" class="grid"><p>Loading deals‚Ä¶</p></div>
    <div id="empty" class="empty">No items match your search/filter. Try a different keyword.</div>
  </main>

  <footer class="wrap">
    <p class="muted"><b>Disclosure:</b> As an Amazon Associate I earn from qualifying purchases. Promo codes, coupons, and prices can change at any time.</p>
  </footer>

  <!-- IMPORTANT: your existing JS stays exactly the same structure.
       I‚Äôm keeping every ID/class your code relies on.
       Paste the SAME JS you had before BELOW (or leave it if this file already contains it).
       If you already have the working JS here, no changes needed. -->

  <script>
  /* ===== If your previous JS was already here, keep it.
     If not, paste your working loader/retagger/filter JS below.
     This polish file only changed visuals/HTML structure ‚Äî not behavior. */
  </script>
</body>
</html>
