<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>BagThat | Basic Onboarding</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;background:#f6faf9;margin:0;display:flex;justify-content:center;align-items:center;height:100vh}
form{background:#fff;padding:32px;border-radius:16px;box-shadow:0 10px 26px rgba(2,24,43,.12);max-width:420px;width:100%}
input{width:100%;padding:10px;margin:6px 0;border:1px solid #ccc;border-radius:8px}
button{background:#0f915a;color:#fff;border:none;padding:12px;width:100%;border-radius:8px;font-weight:700}
</style>
</head>
<body>
<form id="basicForm">
<h2>Set up your Basic site</h2>
<input name="store_display_name" placeholder="Store name" required>
<input name="email" type="email" placeholder="Contact email" required>
<input name="subdomain" placeholder="Subdomain (no spaces)" required>
<input name="amazon_tag" placeholder="Amazon Associates ID" required>
<button type="submit">Submit onboarding</button>
</form>
<script>
document.getElementById('basicForm').addEventListener('submit',async e=>{
  e.preventDefault();
  const f=new FormData(e.target);
  const q=new URLSearchParams([...f.entries()]);
  q.append('plan','basic');
  q.append('callback','cb');
  const url='https://script.google.com/macros/s/AKfycbytm-ntU4HHZq4PDXpwr4qoflZUy8Hcg-7GFLT0RFUJGuKIG0Zy3lIDEYTRBt7UVqkK/exec?'+q.toString();
  try{
    const res=await fetch(url);
    const text=await res.text();
    if(text.includes('"ok":true')){
      location.href='/success/?domain='+f.get('subdomain')+'.bagthatthangup.com&store='+encodeURIComponent(f.get('store_display_name'));
    }else alert('Error saving your info.');
  }catch(err){alert('Network error. Try again.');}
});
</script>
</body>
</html>
