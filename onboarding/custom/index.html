<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Custom Plan Setup • BagThat</title>
<style>
body{font-family:system-ui,-apple-system,Segoe UI,Roboto,sans-serif;background:#f6f8fa;margin:0;padding:0;display:flex;justify-content:center;align-items:center;min-height:100vh}
form{background:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 14px rgba(0,0,0,.08);width:90%;max-width:400px}
h2{text-align:center;margin-top:0;color:#222}
input,select,button{width:100%;padding:10px;margin:8px 0;border:1px solid #ccc;border-radius:8px;font-size:15px}
button{background:#0f915a;color:#fff;font-weight:600;cursor:pointer;border:none}
button:disabled{background:#a0a0a0;cursor:not-allowed}
</style>
</head>
<body>

<form id="customForm">
  <h2>Custom Plan Setup</h2>

  <label>Store name</label>
  <input name="site_display_name" required>

  <label>Contact email</label>
  <input name="email" type="email" required>

  <label>Subdomain (no spaces)</label>
  <input name="subdomain" required>

  <small>Example: mystore → mystore.bagthatthangup.com</small>

  <label>Amazon Associates ID</label>
  <input name="amazon_tag" required>

  <label>Logo URL</label>
  <input name="logo_url">

  <label>Primary Color</label>
  <input name="color_primary" placeholder="#0f915a">

  <label>Accent Color</label>
  <input name="color_secondary" placeholder="#0052cc">

  <label>Extra Button Label (optional)</label>
  <input name="extra_btn_label" placeholder="Follow me on Amazon">

  <label>Extra Button URL (optional)</label>
  <input name="extra_btn_url" placeholder="https://amazon.com/shop/...">

  <label>Layout Preference</label>
  <select name="layout">
    <option value="Grid">Grid</option>
    <option value="List">List</option>
  </select>

  <button type="submit">Submit Onboarding</button>
</form>

<script>
const GAS = "https://script.google.com/macros/s/PASTE-YOUR-EXEC-URL-HERE/exec";

document.getElementById("customForm").addEventListener("submit", async e => {
  e.preventDefault();
  const btn = e.target.querySelector("button[type=submit]");
  btn.disabled = true;
  btn.textContent = "Submitting...";

  const payload = Object.fromEntries(new FormData(e.target));
  payload.plan = "custom";
  payload.status = "active";

  try {
    const res = await fetch(GAS, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });
    const data = await res.json();

    if (data.ok) {
      window.location.href = "/onboarding/success/";
    } else {
      alert("Server error: " + data.error);
    }

  } catch (err) {
    alert("Network error: " + err.message);
  } finally {
    btn.disabled = false;
    btn.textContent = "Submit Onboarding";
  }
});
</script>

</body>
</html>
